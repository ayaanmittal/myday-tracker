<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIME Type Fix Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test { margin: 10px 0; padding: 15px; border-radius: 5px; }
        .pass { background-color: #d4edda; border: 1px solid #c3e6cb; }
        .fail { background-color: #f8d7da; border: 1px solid #f5c6cb; }
        .info { background-color: #d1ecf1; border: 1px solid #bee5eb; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 3px; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; font-size: 12px; }
        .url { background: #e9ecef; padding: 5px; border-radius: 3px; font-family: monospace; }
    </style>
</head>
<body>
    <h1>üîß JavaScript MIME Type Fix Test</h1>
    
    <div class="test info">
        <h3>üìã This test will:</h3>
        <ol>
            <li>Test the exact JavaScript file causing the error</li>
            <li>Check its MIME type and content</li>
            <li>Provide specific fixes for your hosting</li>
        </ol>
    </div>

    <button onclick="testMainJS()">üéØ Test Main JavaScript File</button>
    <button onclick="testAllJSFiles()">üìÅ Test All JavaScript Files</button>
    <button onclick="clearResults()">üóëÔ∏è Clear Results</button>

    <div id="results"></div>

    <div class="test info">
        <h3>üõ†Ô∏è Quick Fixes</h3>
        <p><strong>If the test shows HTML content instead of JavaScript:</strong></p>
        <ol>
            <li><strong>Upload .htaccess-ultimate</strong> as .htaccess</li>
            <li><strong>Or configure hosting to use index-router.php</strong></li>
            <li><strong>Or contact hosting support about MIME types</li>
        </ol>
    </div>

    <script>
        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }

        async function testMainJS() {
            const results = document.getElementById('results');
            results.innerHTML = '<h3>üéØ Testing Main JavaScript File...</h3>';

            // Test the main JavaScript file from the error
            const jsFile = './assets/index-DLk3RBaS.js';
            
            try {
                // Test with HEAD request first
                const headResponse = await fetch(jsFile, { method: 'HEAD' });
                const contentType = headResponse.headers.get('content-type');
                
                // Test with GET request
                const getResponse = await fetch(jsFile);
                const content = await getResponse.text();
                
                const isJavaScript = content.includes('function') || content.includes('const') || content.includes('var') || content.includes('import');
                const isHTML = content.includes('<html') || content.includes('<!DOCTYPE') || content.includes('<head>');
                
                const status = isJavaScript ? 'pass' : 'fail';
                const icon = isJavaScript ? '‚úÖ' : '‚ùå';
                
                results.innerHTML = `
                    <div class="test ${status}">
                        <h4>${icon} Main JavaScript File Test</h4>
                        <p><strong>File:</strong> <span class="url">${jsFile}</span></p>
                        <p><strong>Status Code:</strong> ${getResponse.status}</p>
                        <p><strong>Content-Type Header:</strong> ${contentType || 'Not found'}</p>
                        <p><strong>Content Type Detected:</strong> ${isJavaScript ? 'JavaScript Code' : isHTML ? 'HTML Content' : 'Unknown'}</p>
                        <p><strong>File Size:</strong> ${content.length} characters</p>
                        
                        <h5>Content Preview (first 300 characters):</h5>
                        <pre>${content.substring(0, 300)}${content.length > 300 ? '...' : ''}</pre>
                        
                        <p><strong>Result:</strong> ${isJavaScript ? '‚úÖ CORRECT - File contains JavaScript code' : '‚ùå INCORRECT - File contains HTML or wrong content'}</p>
                        
                        ${!isJavaScript ? `
                            <div style="background: #fff3cd; padding: 10px; border-radius: 3px; margin-top: 10px;">
                                <h5>üîß Fix Required:</h5>
                                <p>Your hosting is serving JavaScript files as HTML. Try these solutions:</p>
                                <ol>
                                    <li>Upload <code>.htaccess-ultimate</code> as <code>.htaccess</code></li>
                                    <li>Or configure hosting to use <code>index-router.php</code></li>
                                    <li>Or contact hosting support about MIME types</li>
                                </ol>
                            </div>
                        ` : ''}
                    </div>
                `;
            } catch (error) {
                results.innerHTML = `
                    <div class="test fail">
                        <h4>‚ùå Main JavaScript File Test Failed</h4>
                        <p><strong>Error:</strong> ${error.message}</p>
                        <p><strong>File:</strong> <span class="url">${jsFile}</span></p>
                        <p><strong>Fix:</strong> Check that the assets folder is uploaded correctly</p>
                    </div>
                `;
            }
        }

        async function testAllJSFiles() {
            const results = document.getElementById('results');
            results.innerHTML = '<h3>üìÅ Testing All JavaScript Files...</h3>';

            const jsFiles = [
                './assets/index-DLk3RBaS.js',
                './assets/vendor-BbgGNKEy.js',
                './assets/ui-mpZN0iG6.js',
                './assets/router-OEMMVy6r.js',
                './assets/api-C7msRyNt.js'
            ];

            let allResults = '';

            for (const file of jsFiles) {
                try {
                    const response = await fetch(file, { method: 'HEAD' });
                    const contentType = response.headers.get('content-type');
                    const isCorrect = contentType && contentType.includes('application/javascript');
                    
                    const status = isCorrect ? 'pass' : 'fail';
                    const icon = isCorrect ? '‚úÖ' : '‚ùå';
                    
                    allResults += `
                        <div class="test ${status}">
                            <h5>${icon} ${file.split('/').pop()}</h5>
                            <p><strong>Content-Type:</strong> ${contentType || 'Not found'}</p>
                            <p><strong>Status:</strong> ${isCorrect ? 'Correct' : 'Incorrect'}</p>
                        </div>
                    `;
                } catch (error) {
                    allResults += `
                        <div class="test fail">
                            <h5>‚ùå ${file.split('/').pop()}</h5>
                            <p><strong>Error:</strong> ${error.message}</p>
                        </div>
                    `;
                }
            }

            results.innerHTML = allResults;
        }
    </script>
</body>
</html>
