<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PHP Router Test - MyDay | ERCMAX</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test { margin: 10px 0; padding: 15px; border-radius: 5px; }
        .pass { background-color: #d4edda; border: 1px solid #c3e6cb; }
        .fail { background-color: #f8d7da; border: 1px solid #f5c6cb; }
        .info { background-color: #d1ecf1; border: 1px solid #bee5eb; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 3px; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; font-size: 12px; }
    </style>
</head>
<body>
    <h1>üîß PHP Router Test</h1>
    
    <div class="test info">
        <h3>üìã This test will:</h3>
        <ol>
            <li>Test if the PHP router is working</li>
            <li>Check JavaScript MIME types</li>
            <li>Verify the fix is working</li>
        </ol>
    </div>

    <button onclick="testPHPRouter()">üß™ Test PHP Router</button>
    <button onclick="testJavaScript()">üéØ Test JavaScript Files</button>
    <button onclick="clearResults()">üóëÔ∏è Clear Results</button>

    <div id="results"></div>

    <div class="test info">
        <h3>üõ†Ô∏è How to Use PHP Router:</h3>
        <ol>
            <li><strong>Upload index.php</strong> to your hosting root</li>
            <li><strong>Configure hosting</strong> to use index.php as entry point</li>
            <li><strong>Or rename index.html to index.html.backup</strong> and rename index.php to index.html</li>
        </ol>
    </div>

    <script>
        function clearResults() {
            document.getElementById('results').innerHTML = '';
        }

        async function testPHPRouter() {
            const results = document.getElementById('results');
            results.innerHTML = '<h3>üß™ Testing PHP Router...</h3>';

            try {
                // Test if PHP router is working
                const response = await fetch('/index.php');
                const content = await response.text();
                
                const isPHP = content.includes('<?php') || content.includes('PHP Router');
                const isHTML = content.includes('<html') || content.includes('<!DOCTYPE');
                
                const status = isHTML ? 'pass' : 'fail';
                const icon = isHTML ? '‚úÖ' : '‚ùå';
                
                results.innerHTML = `
                    <div class="test ${status}">
                        <h4>${icon} PHP Router Test</h4>
                        <p><strong>Status Code:</strong> ${response.status}</p>
                        <p><strong>Content Type:</strong> ${response.headers.get('content-type') || 'Not found'}</p>
                        <p><strong>Content Detected:</strong> ${isHTML ? 'HTML Content (Good)' : isPHP ? 'PHP Code (Router not configured)' : 'Unknown'}</p>
                        <p><strong>Result:</strong> ${isHTML ? '‚úÖ PHP Router is working!' : '‚ùå PHP Router needs configuration'}</p>
                    </div>
                `;
            } catch (error) {
                results.innerHTML = `
                    <div class="test fail">
                        <h4>‚ùå PHP Router Test Failed</h4>
                        <p><strong>Error:</strong> ${error.message}</p>
                        <p><strong>Fix:</strong> Make sure index.php is uploaded and configured</p>
                    </div>
                `;
            }
        }

        async function testJavaScript() {
            const results = document.getElementById('results');
            results.innerHTML = '<h3>üéØ Testing JavaScript Files...</h3>';

            const jsFile = '/assets/index-DLk3RBaS.js';
            
            try {
                const response = await fetch(jsFile);
                const contentType = response.headers.get('content-type');
                const content = await response.text();
                
                const isJavaScript = content.includes('function') || content.includes('const') || content.includes('var');
                const isHTML = content.includes('<html') || content.includes('<!DOCTYPE');
                
                const status = isJavaScript ? 'pass' : 'fail';
                const icon = isJavaScript ? '‚úÖ' : '‚ùå';
                
                results.innerHTML = `
                    <div class="test ${status}">
                        <h4>${icon} JavaScript File Test</h4>
                        <p><strong>File:</strong> ${jsFile}</p>
                        <p><strong>Status Code:</strong> ${response.status}</p>
                        <p><strong>Content-Type:</strong> ${contentType || 'Not found'}</p>
                        <p><strong>Content Type Detected:</strong> ${isJavaScript ? 'JavaScript Code' : isHTML ? 'HTML Content' : 'Unknown'}</p>
                        <p><strong>Result:</strong> ${isJavaScript ? '‚úÖ JavaScript files are working!' : '‚ùå JavaScript files still have MIME type issues'}</p>
                    </div>
                `;
            } catch (error) {
                results.innerHTML = `
                    <div class="test fail">
                        <h4>‚ùå JavaScript Test Failed</h4>
                        <p><strong>Error:</strong> ${error.message}</p>
                        <p><strong>Fix:</strong> Check if the assets folder is uploaded correctly</p>
                    </div>
                `;
            }
        }
    </script>
</body>
</html>
