<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Minimal Test - MyDay</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
        }
        .success { background: #d1fae5; border-color: #10b981; }
        .error { background: #fee2e2; border-color: #ef4444; }
        .warning { background: #fef3c7; border-color: #f59e0b; }
        .info { background: #dbeafe; border-color: #3b82f6; }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover { background: #2563eb; }
        .log {
            background: #f3f4f6;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Minimal Mobile Test</h1>
        <p>This page tests basic functionality to identify what's causing the App Error.</p>
        
        <div class="test-section info">
            <h3>Device Information</h3>
            <div id="device-info"></div>
        </div>
        
        <div class="test-section info">
            <h3>JavaScript Tests</h3>
            <button class="test-button" onclick="testBasicJS()">Test Basic JS</button>
            <button class="test-button" onclick="testModules()">Test ES6 Modules</button>
            <button class="test-button" onclick="testFetch()">Test Network</button>
            <button class="test-button" onclick="testReact()">Test React</button>
            <div id="js-results"></div>
        </div>
        
        <div class="test-section info">
            <h3>Error Log</h3>
            <div id="error-log" class="log"></div>
            <button class="test-button" onclick="clearLog()">Clear Log</button>
        </div>
        
        <div class="test-section info">
            <h3>Main App Test</h3>
            <button class="test-button" onclick="testMainApp()">Load Main App</button>
            <button class="test-button" onclick="testSimpleApp()">Load Simple App</button>
            <div id="app-results"></div>
        </div>
    </div>

    <script>
        let errorCount = 0;
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logElement = document.getElementById('error-log');
            const entry = `[${timestamp}] ${message}`;
            logElement.innerHTML += entry + '\n';
            logElement.scrollTop = logElement.scrollHeight;
            console.log(message);
        }
        
        function clearLog() {
            document.getElementById('error-log').innerHTML = '';
            errorCount = 0;
        }
        
        function addResult(elementId, message, type) {
            const element = document.getElementById(elementId);
            const div = document.createElement('div');
            div.textContent = message;
            div.className = type;
            div.style.margin = '5px 0';
            div.style.padding = '5px';
            div.style.borderRadius = '4px';
            element.appendChild(div);
        }
        
        // Device info
        function showDeviceInfo() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const info = `
                Mobile: ${isMobile}
                User Agent: ${navigator.userAgent}
                Viewport: ${window.innerWidth}x${window.innerHeight}
                Online: ${navigator.onLine}
                Language: ${navigator.language}
            `;
            document.getElementById('device-info').innerHTML = info.replace(/\n/g, '<br>');
        }
        
        // Basic JavaScript test
        function testBasicJS() {
            log('Testing basic JavaScript...');
            try {
                // Test basic JS features
                const testObj = { test: 'value' };
                const testArray = [1, 2, 3];
                const testFunction = () => 'test';
                
                if (testObj.test === 'value' && testArray.length === 3 && testFunction() === 'test') {
                    addResult('js-results', '✓ Basic JavaScript works', 'success');
                    log('Basic JavaScript test passed');
                } else {
                    addResult('js-results', '✗ Basic JavaScript failed', 'error');
                    log('Basic JavaScript test failed');
                }
            } catch (error) {
                addResult('js-results', '✗ Basic JavaScript error: ' + error.message, 'error');
                log('Basic JavaScript error: ' + error.message);
            }
        }
        
        // ES6 Modules test
        function testModules() {
            log('Testing ES6 modules...');
            try {
                // Test if modules are supported
                const script = document.createElement('script');
                script.type = 'module';
                script.textContent = 'console.log("Module test");';
                
                if (script.type === 'module') {
                    addResult('js-results', '✓ ES6 modules supported', 'success');
                    log('ES6 modules test passed');
                } else {
                    addResult('js-results', '✗ ES6 modules not supported', 'error');
                    log('ES6 modules not supported');
                }
            } catch (error) {
                addResult('js-results', '✗ ES6 modules error: ' + error.message, 'error');
                log('ES6 modules error: ' + error.message);
            }
        }
        
        // Network test
        function testFetch() {
            log('Testing network connectivity...');
            fetch('/src/main.tsx', { method: 'HEAD' })
                .then(response => {
                    if (response.ok) {
                        addResult('js-results', '✓ Network connectivity works', 'success');
                        log('Network test passed');
                    } else {
                        addResult('js-results', '✗ Network error: ' + response.status, 'error');
                        log('Network test failed: ' + response.status);
                    }
                })
                .catch(error => {
                    addResult('js-results', '✗ Network error: ' + error.message, 'error');
                    log('Network test error: ' + error.message);
                });
        }
        
        // React test
        function testReact() {
            log('Testing React availability...');
            try {
                // Try to dynamically import React
                import('react').then(React => {
                    addResult('js-results', '✓ React can be imported', 'success');
                    log('React import successful');
                }).catch(error => {
                    addResult('js-results', '✗ React import failed: ' + error.message, 'error');
                    log('React import failed: ' + error.message);
                });
            } catch (error) {
                addResult('js-results', '✗ React test error: ' + error.message, 'error');
                log('React test error: ' + error.message);
            }
        }
        
        // Main app test
        function testMainApp() {
            log('Testing main app loading...');
            addResult('app-results', 'Loading main app...', 'info');
            
            const script = document.createElement('script');
            script.type = 'module';
            script.src = '/src/main.tsx';
            script.onload = () => {
                addResult('app-results', '✓ Main app script loaded', 'success');
                log('Main app script loaded successfully');
            };
            script.onerror = (error) => {
                addResult('app-results', '✗ Main app failed: ' + error, 'error');
                log('Main app script failed: ' + error);
            };
            document.head.appendChild(script);
        }
        
        // Simple app test
        function testSimpleApp() {
            log('Testing simple app loading...');
            addResult('app-results', 'Loading simple app...', 'info');
            
            const script = document.createElement('script');
            script.type = 'module';
            script.src = '/src/main-simple.tsx';
            script.onload = () => {
                addResult('app-results', '✓ Simple app script loaded', 'success');
                log('Simple app script loaded successfully');
            };
            script.onerror = (error) => {
                addResult('app-results', '✗ Simple app failed: ' + error, 'error');
                log('Simple app script failed: ' + error);
            };
            document.head.appendChild(script);
        }
        
        // Error handling
        window.addEventListener('error', (event) => {
            errorCount++;
            log(`JavaScript Error #${errorCount}: ${event.message} at ${event.filename}:${event.lineno}`, 'error');
            addResult('js-results', `Error #${errorCount}: ${event.message}`, 'error');
        });
        
        window.addEventListener('unhandledrejection', (event) => {
            errorCount++;
            log(`Promise Rejection #${errorCount}: ${event.reason}`, 'error');
            addResult('js-results', `Promise Error #${errorCount}: ${event.reason}`, 'error');
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            log('Minimal test page loaded');
            showDeviceInfo();
        });
    </script>
</body>
</html>
